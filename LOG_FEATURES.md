# 日志页面新增功能

## 🎯 功能概览

### 1. **列可见性控制**

- 点击右上角的 "View" 按钮可以控制哪些列显示/隐藏
- 支持所有列的显示切换（除了选择列）
- 设置会在当前会话中保持

### 2. **点击复制功能**

- **所有数据列都支持点击复制**
- 点击任意单元格内容即可复制到剪贴板
- 成功复制后会显示 toast 提示
- 复制失败时也会有相应的错误提示

## 📋 支持复制的列

| 列名                | 复制内容           | 标签        |
| ------------------- | ------------------ | ----------- |
| Time                | 格式化的时间字符串 | "时间"      |
| Channel             | 渠道ID数字         | "渠道ID"    |
| User                | 用户名             | "用户名"    |
| Token               | Token名称          | "Token名称" |
| Type                | 类型数字           | "类型"      |
| Model               | 完整模型名称       | "模型名称"  |
| Prompt              | 输入Token数        | "输入Token" |
| Completion          | 输出Token数        | "输出Token" |
| 重试                | 完整重试序列       | "重试序列"  |
| Quota               | 格式化的配额       | "配额"      |
| Duration/First Word | 持续时间           | "持续时间"  |
| Details             | 完整详细信息       | "详细信息"  |

## 🚀 使用方法

### 列可见性控制

1. 点击表格右上角的 **"View"** 按钮
2. 在下拉菜单中勾选/取消勾选要显示的列
3. 列会立即显示/隐藏

### 点击复制

1. 将鼠标悬停在任意数据单元格上
2. 单元格会有轻微的背景色变化提示
3. 点击单元格即可复制内容
4. 右上角会显示复制成功/失败的提示

## 🎨 UI/UX 改进

### 视觉反馈

- **悬停效果**: 可复制的单元格在鼠标悬停时会有背景色变化
- **光标提示**: 鼠标悬停时显示 `cursor-pointer`
- **Toast通知**: 复制操作的即时反馈

### 重试列优化

- **智能截断**: 长序列会显示为 `834->...(5)` 格式
- **详细提示**: 鼠标悬停显示完整序列和尝试次数
- **固定宽度**: 避免表格布局抖动

### 模型列优化

- **截断显示**: 长模型名会截断显示
- **完整信息**: 通过tooltip显示完整模型名
- **可复制**: 复制完整模型名称而非截断版本

## 🔧 技术实现

### 组件结构

```
📁 components/ui/
├── copyable-cell.tsx          # 可复制单元格组件
└── table/
    └── data-table-column-toggle.tsx  # 列切换组件

📁 hooks/
└── use-copy-to-clipboard.tsx  # 复制功能hook

📁 sections/log/tables/
├── columns.tsx                # 更新的列定义
└── index.tsx                  # 更新的表格组件
```

### 关键特性

- **类型安全**: 完整的TypeScript类型支持
- **错误处理**: 复制失败的graceful处理
- **性能优化**: 使用React.memo和useMemo优化渲染
- **响应式设计**: 在不同屏幕尺寸下都能正常工作

## 📱 兼容性

- ✅ 现代浏览器（Chrome, Firefox, Safari, Edge）
- ✅ 移动端浏览器
- ✅ 支持键盘导航
- ✅ 支持屏幕阅读器

## 🎯 未来改进

- [ ] 添加批量复制选中行功能
- [ ] 支持自定义列宽度
- [ ] 添加列排序功能
- [ ] 支持导出功能
